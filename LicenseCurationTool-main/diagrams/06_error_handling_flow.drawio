<mxfile host="app.diagrams.net" modified="2025-01-15T13:00:00.000Z" agent="Claude" version="22.1.16">
  <diagram name="Error Handling Flow" id="error-handling">
    <mxGraphModel dx="1422" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="1400" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <!-- Critical Stages (Must Pass) -->
        <mxCell id="critical-title" value="Critical Stages (Must Pass)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="40" y="40" width="220" height="30" as="geometry" />
        </mxCell>

        <mxCell id="stage1-critical" value="Stage 1:&#xa;ORT Analyzer" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#bbdefb;strokeColor=#1976D2;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="60" y="90" width="180" height="60" as="geometry" />
        </mxCell>

        <mxCell id="fail1" value="FAIL?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#ffccbc;strokeColor=#BF360C;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="300" y="90" width="80" height="60" as="geometry" />
        </mxCell>

        <mxCell id="stop1" value="❌ Workflow Stops&#xa;No reports generated" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ef5350;strokeColor=#c62828;fontSize=11;fontColor=#FFFFFF;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="430" y="90" width="160" height="60" as="geometry" />
        </mxCell>

        <mxCell id="stage2-critical" value="Stage 2:&#xa;Extract Uncertain" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#90caf9;strokeColor=#1565C0;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="60" y="180" width="180" height="60" as="geometry" />
        </mxCell>

        <mxCell id="fail2" value="FAIL?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#ffccbc;strokeColor=#BF360C;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="300" y="180" width="80" height="60" as="geometry" />
        </mxCell>

        <mxCell id="stop2" value="❌ Workflow Stops&#xa;Can't identify gaps" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ef5350;strokeColor=#c62828;fontSize=11;fontColor=#FFFFFF;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="430" y="180" width="160" height="60" as="geometry" />
        </mxCell>

        <!-- Optional Stages (Continue on Error) -->
        <mxCell id="optional-title" value="Optional Stages (Continue on Error)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="40" y="280" width="280" height="30" as="geometry" />
        </mxCell>

        <mxCell id="stage25-optional" value="Stage 2.5:&#xa;PyPI Fetch" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ff9800;strokeColor=#E65100;fontSize=12;fontStyle=1;fontColor=#FFFFFF" vertex="1" parent="1">
          <mxGeometry x="60" y="330" width="180" height="60" as="geometry" />
        </mxCell>

        <mxCell id="fail25" value="FAIL?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#ffccbc;strokeColor=#BF360C;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="300" y="330" width="80" height="60" as="geometry" />
        </mxCell>

        <mxCell id="continue25" value="⚠️ Continue Anyway&#xa;Log warning&#xa;Skip PyPI results" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffb74d;strokeColor=#F57C00;fontSize=11" vertex="1" parent="1">
          <mxGeometry x="430" y="330" width="160" height="60" as="geometry" />
        </mxCell>

        <mxCell id="stage3-optional" value="Stage 3:&#xa;ScanCode Scan" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#64b5f6;strokeColor=#0D47A1;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="60" y="420" width="180" height="60" as="geometry" />
        </mxCell>

        <mxCell id="fail3" value="FAIL?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#ffccbc;strokeColor=#BF360C;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="300" y="420" width="80" height="60" as="geometry" />
        </mxCell>

        <mxCell id="continue3" value="⚠️ Continue Anyway&#xa;Log warning&#xa;Use ORT results only" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#90caf9;strokeColor=#0288D1;fontSize=11" vertex="1" parent="1">
          <mxGeometry x="430" y="420" width="160" height="60" as="geometry" />
        </mxCell>

        <mxCell id="stage5-optional" value="Stage 5:&#xa;AI Reports" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8bbd0;strokeColor=#C2185B;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="60" y="510" width="180" height="60" as="geometry" />
        </mxCell>

        <mxCell id="fail5" value="FAIL?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#ffccbc;strokeColor=#BF360C;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="300" y="510" width="80" height="60" as="geometry" />
        </mxCell>

        <mxCell id="continue5" value="⚠️ Continue Anyway&#xa;Log warning&#xa;Skip AI analysis" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f48fb1;strokeColor=#E91E63;fontSize=11" vertex="1" parent="1">
          <mxGeometry x="430" y="510" width="160" height="60" as="geometry" />
        </mxCell>

        <!-- Common Failure Scenarios -->
        <mxCell id="scenarios-title" value="Common Failure Scenarios" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="660" y="40" width="220" height="30" as="geometry" />
        </mxCell>

        <mxCell id="scenario1" value="PyPI API timeout" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffecb3;strokeColor=#FF6F00;fontSize=11" vertex="1" parent="1">
          <mxGeometry x="660" y="90" width="200" height="40" as="geometry" />
        </mxCell>

        <mxCell id="scenario1-action" value="→ Continue without PyPI data" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontStyle=2" vertex="1" parent="1">
          <mxGeometry x="870" y="95" width="180" height="30" as="geometry" />
        </mxCell>

        <mxCell id="scenario2" value="ScanCode timeout (>120s)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffecb3;strokeColor=#FF6F00;fontSize=11" vertex="1" parent="1">
          <mxGeometry x="660" y="140" width="200" height="40" as="geometry" />
        </mxCell>

        <mxCell id="scenario2-action" value="→ Continue with partial results" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontStyle=2" vertex="1" parent="1">
          <mxGeometry x="870" y="145" width="180" height="30" as="geometry" />
        </mxCell>

        <mxCell id="scenario3" value="Azure OpenAI API key missing" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffecb3;strokeColor=#FF6F00;fontSize=11" vertex="1" parent="1">
          <mxGeometry x="660" y="190" width="200" height="40" as="geometry" />
        </mxCell>

        <mxCell id="scenario3-action" value="→ Skip AI reports, deploy rest" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontStyle=2" vertex="1" parent="1">
          <mxGeometry x="870" y="195" width="180" height="30" as="geometry" />
        </mxCell>

        <mxCell id="scenario4" value="Azure OpenAI quota exceeded" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffecb3;strokeColor=#FF6F00;fontSize=11" vertex="1" parent="1">
          <mxGeometry x="660" y="240" width="200" height="40" as="geometry" />
        </mxCell>

        <mxCell id="scenario4-action" value="→ Continue without AI analysis" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontStyle=2" vertex="1" parent="1">
          <mxGeometry x="870" y="245" width="180" height="30" as="geometry" />
        </mxCell>

        <mxCell id="scenario5" value="SPDX validation error" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffecb3;strokeColor=#FF6F00;fontSize=11" vertex="1" parent="1">
          <mxGeometry x="660" y="290" width="200" height="40" as="geometry" />
        </mxCell>

        <mxCell id="scenario5-action" value="→ Auto-fix and continue" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontStyle=2" vertex="1" parent="1">
          <mxGeometry x="870" y="295" width="180" height="30" as="geometry" />
        </mxCell>

        <mxCell id="scenario6" value="Package download failed" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffecb3;strokeColor=#FF6F00;fontSize=11" vertex="1" parent="1">
          <mxGeometry x="660" y="340" width="200" height="40" as="geometry" />
        </mxCell>

        <mxCell id="scenario6-action" value="→ Skip package, continue rest" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontStyle=2" vertex="1" parent="1">
          <mxGeometry x="870" y="345" width="180" height="30" as="geometry" />
        </mxCell>

        <!-- Recovery Flow -->
        <mxCell id="recovery-title" value="Recovery and Graceful Degradation" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="660" y="420" width="280" height="30" as="geometry" />
        </mxCell>

        <mxCell id="recovery1" value="1. Log all errors to workflow summary" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#c8e6c9;strokeColor=#2E7D32;fontSize=11;align=left" vertex="1" parent="1">
          <mxGeometry x="660" y="470" width="280" height="35" as="geometry" />
        </mxCell>

        <mxCell id="recovery2" value="2. Deploy partial results (better than nothing)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#c8e6c9;strokeColor=#2E7D32;fontSize=11;align=left" vertex="1" parent="1">
          <mxGeometry x="660" y="515" width="280" height="35" as="geometry" />
        </mxCell>

        <mxCell id="recovery3" value="3. Upload artifacts even if deployment fails" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#c8e6c9;strokeColor=#2E7D32;fontSize=11;align=left" vertex="1" parent="1">
          <mxGeometry x="660" y="560" width="280" height="35" as="geometry" />
        </mxCell>

        <mxCell id="recovery4" value="4. Send failure notification (via workflow status)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#c8e6c9;strokeColor=#2E7D32;fontSize=11;align=left" vertex="1" parent="1">
          <mxGeometry x="660" y="605" width="280" height="35" as="geometry" />
        </mxCell>

        <!-- Deployment Guarantees -->
        <mxCell id="guarantees-title" value="Deployment Guarantees" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="60" y="630" width="200" height="30" as="geometry" />
        </mxCell>

        <mxCell id="guarantee1" value="✅ Always deploy if ORT analyzer succeeds" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#a5d6a7;strokeColor=#388E3C;fontSize=11;align=left;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="60" y="680" width="280" height="40" as="geometry" />
        </mxCell>

        <mxCell id="guarantee2" value="✅ Minimum deployment: ORT WebApp + SPDX" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#a5d6a7;strokeColor=#388E3C;fontSize=11;align=left;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="60" y="730" width="280" height="40" as="geometry" />
        </mxCell>

        <mxCell id="guarantee3" value="✅ Enhanced features are additive, not blocking" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#a5d6a7;strokeColor=#388E3C;fontSize=11;align=left;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="60" y="780" width="280" height="40" as="geometry" />
        </mxCell>

        <mxCell id="guarantee4" value="✅ Artifacts preserved even if deployment fails" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#a5d6a7;strokeColor=#388E3C;fontSize=11;align=left;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="60" y="830" width="280" height="40" as="geometry" />
        </mxCell>

        <!-- User Experience -->
        <mxCell id="ux-title" value="User Experience on Failure" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="400" y="630" width="220" height="30" as="geometry" />
        </mxCell>

        <mxCell id="ux1" value="Landing page shows available reports" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b2dfdb;strokeColor=#00695C;fontSize=11;align=left" vertex="1" parent="1">
          <mxGeometry x="400" y="680" width="280" height="35" as="geometry" />
        </mxCell>

        <mxCell id="ux2" value="Missing reports have explanatory message" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b2dfdb;strokeColor=#00695C;fontSize=11;align=left" vertex="1" parent="1">
          <mxGeometry x="400" y="725" width="280" height="35" as="geometry" />
        </mxCell>

        <mxCell id="ux3" value="Workflow summary shows what succeeded" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b2dfdb;strokeColor=#00695C;fontSize=11;align=left" vertex="1" parent="1">
          <mxGeometry x="400" y="770" width="280" height="35" as="geometry" />
        </mxCell>

        <mxCell id="ux4" value="Artifacts remain downloadable for debugging" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b2dfdb;strokeColor=#00695C;fontSize=11;align=left" vertex="1" parent="1">
          <mxGeometry x="400" y="815" width="280" height="35" as="geometry" />
        </mxCell>

        <!-- Arrows for critical stages -->
        <mxCell id="arrow1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2" edge="1" parent="1" source="stage1-critical" target="fail1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="arrow2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#c62828" edge="1" parent="1" source="fail1" target="stop1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="arrow3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2" edge="1" parent="1" source="stage2-critical" target="fail2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="arrow4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#c62828" edge="1" parent="1" source="fail2" target="stop2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Arrows for optional stages -->
        <mxCell id="arrow5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2" edge="1" parent="1" source="stage25-optional" target="fail25">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="arrow6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#F57C00;dashed=1" edge="1" parent="1" source="fail25" target="continue25">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="arrow7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2" edge="1" parent="1" source="stage3-optional" target="fail3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="arrow8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#0288D1;dashed=1" edge="1" parent="1" source="fail3" target="continue3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="arrow9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2" edge="1" parent="1" source="stage5-optional" target="fail5">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="arrow10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#E91E63;dashed=1" edge="1" parent="1" source="fail5" target="continue5">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Labels -->
        <mxCell id="label-fail" value="Yes" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontStyle=2" vertex="1" parent="1">
          <mxGeometry x="390" y="100" width="30" height="20" as="geometry" />
        </mxCell>

        <mxCell id="label-success" value="No" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontStyle=2" vertex="1" parent="1">
          <mxGeometry x="340" y="150" width="30" height="20" as="geometry" />
        </mxCell>

        <mxCell id="label-continue" value="Yes (continue)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontStyle=2" vertex="1" parent="1">
          <mxGeometry x="390" y="340" width="30" height="20" as="geometry" />
        </mxCell>

        <!-- Title -->
        <mxCell id="title" value="Error Handling and Graceful Degradation Strategy" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="250" y="920" width="600" height="30" as="geometry" />
        </mxCell>

        <!-- Legend -->
        <mxCell id="legend-title" value="Legend:" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="720" y="730" width="60" height="20" as="geometry" />
        </mxCell>

        <mxCell id="legend1" value="" style="edgeStyle=none;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#c62828" edge="1" parent="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="730" y="770" as="sourcePoint" />
            <mxPoint x="780" y="770" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="legend1-text" value="Critical failure (stops workflow)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10" vertex="1" parent="1">
          <mxGeometry x="790" y="760" width="180" height="20" as="geometry" />
        </mxCell>

        <mxCell id="legend2" value="" style="edgeStyle=none;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#0288D1;dashed=1" edge="1" parent="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="730" y="800" as="sourcePoint" />
            <mxPoint x="780" y="800" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="legend2-text" value="Continue on error (optional feature)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10" vertex="1" parent="1">
          <mxGeometry x="790" y="790" width="180" height="20" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
