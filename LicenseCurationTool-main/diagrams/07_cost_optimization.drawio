<mxfile host="app.diagrams.net" modified="2025-01-15T13:15:00.000Z" agent="Claude" version="22.1.16">
  <diagram name="Cost Optimization" id="cost-optimization">
    <mxGraphModel dx="1422" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <!-- AI Cost Control -->
        <mxCell id="ai-title" value="AI Cost Control Strategy" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="40" y="40" width="280" height="30" as="geometry" />
        </mxCell>

        <!-- Main ORT Report -->
        <mxCell id="main-report" value="Main ORT Report&#xa;(gpt-4.1-mini)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f48fb1;strokeColor=#C2185B;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="40" y="90" width="160" height="60" as="geometry" />
        </mxCell>

        <mxCell id="main-limit" value="Limit: Full analyzer&#xa;result (no pagination)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8bbd0;strokeColor=#C2185B;fontSize=10" vertex="1" parent="1">
          <mxGeometry x="220" y="90" width="140" height="30" as="geometry" />
        </mxCell>

        <mxCell id="main-cost" value="Cost: ~$0.05 USD" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1f5fe;strokeColor=#01579B;fontSize=10;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="220" y="120" width="140" height="30" as="geometry" />
        </mxCell>

        <!-- Conflict Analysis -->
        <mxCell id="conflict-report" value="Conflict Analysis&#xa;(gpt-4)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f48fb1;strokeColor=#C2185B;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="40" y="180" width="160" height="60" as="geometry" />
        </mxCell>

        <mxCell id="conflict-limit" value="Limit: First 20 conflicts" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8bbd0;strokeColor=#C2185B;fontSize=10" vertex="1" parent="1">
          <mxGeometry x="220" y="180" width="140" height="30" as="geometry" />
        </mxCell>

        <mxCell id="conflict-cost" value="Cost: ~$0.10-$0.20 USD" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1f5fe;strokeColor=#01579B;fontSize=10;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="220" y="210" width="140" height="30" as="geometry" />
        </mxCell>

        <!-- Missing Licenses -->
        <mxCell id="missing-report" value="Missing Licenses AI&#xa;(gpt-4o-mini)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f48fb1;strokeColor=#C2185B;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="40" y="270" width="160" height="60" as="geometry" />
        </mxCell>

        <mxCell id="missing-limit" value="Limit: First 15 packages" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8bbd0;strokeColor=#C2185B;fontSize=10" vertex="1" parent="1">
          <mxGeometry x="220" y="270" width="140" height="30" as="geometry" />
        </mxCell>

        <mxCell id="missing-cost" value="Cost: ~$0.05-$0.08 USD" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1f5fe;strokeColor=#01579B;fontSize=10;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="220" y="300" width="140" height="30" as="geometry" />
        </mxCell>

        <!-- Total Cost -->
        <mxCell id="total" value="Total Per Run" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#4caf50;strokeColor=#2E7D32;fontSize=14;fontStyle=1;fontColor=#FFFFFF" vertex="1" parent="1">
          <mxGeometry x="40" y="360" width="160" height="60" as="geometry" />
        </mxCell>

        <mxCell id="total-full" value="Full (all AI): $0.20-$0.33" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#81c784;strokeColor=#388E3C;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="220" y="360" width="140" height="30" as="geometry" />
        </mxCell>

        <mxCell id="total-minimal" value="Minimal (main only): $0.05" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#81c784;strokeColor=#388E3C;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="220" y="390" width="140" height="30" as="geometry" />
        </mxCell>

        <!-- Monthly Estimate -->
        <mxCell id="monthly-title" value="Monthly Estimate (Daily Runs)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="40" y="450" width="260" height="30" as="geometry" />
        </mxCell>

        <mxCell id="monthly1" value="30 runs × $0.33 = ~$10/month (max)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff9c4;strokeColor=#F57F17;fontSize=11;align=left" vertex="1" parent="1">
          <mxGeometry x="40" y="490" width="280" height="35" as="geometry" />
        </mxCell>

        <mxCell id="monthly2" value="30 runs × $0.05 = ~$1.50/month (min)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff9c4;strokeColor=#F57F17;fontSize=11;align=left" vertex="1" parent="1">
          <mxGeometry x="40" y="535" width="280" height="35" as="geometry" />
        </mxCell>

        <mxCell id="monthly3" value="Per repository: $6-$10/month (typical)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffecb3;strokeColor=#FF6F00;fontSize=11;fontStyle=1;align=left" vertex="1" parent="1">
          <mxGeometry x="40" y="580" width="280" height="35" as="geometry" />
        </mxCell>

        <!-- Free Optimizations -->
        <mxCell id="free-title" value="Free Optimizations (No API Cost)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="420" y="40" width="340" height="30" as="geometry" />
        </mxCell>

        <mxCell id="free1" value="1. PyPI API Fetch (NEW)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ff9800;strokeColor=#E65100;fontSize=12;fontStyle=1;fontColor=#FFFFFF" vertex="1" parent="1">
          <mxGeometry x="420" y="90" width="160" height="40" as="geometry" />
        </mxCell>

        <mxCell id="free1-desc" value="Reduces ScanCode workload&#xa;by ~30-50% (Python packages)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffb74d;strokeColor=#E65100;fontSize=10" vertex="1" parent="1">
          <mxGeometry x="600" y="90" width="160" height="40" as="geometry" />
        </mxCell>

        <mxCell id="free2" value="2. ScanCode Limit: 20 packages" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#64b5f6;strokeColor=#0D47A1;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="420" y="150" width="160" height="40" as="geometry" />
        </mxCell>

        <mxCell id="free2-desc" value="Saves ~5-15 minutes&#xa;per workflow run" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#90caf9;strokeColor=#0D47A1;fontSize=10" vertex="1" parent="1">
          <mxGeometry x="600" y="150" width="160" height="40" as="geometry" />
        </mxCell>

        <mxCell id="free3" value="3. ScanCode Timeout: 120s" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#64b5f6;strokeColor=#0D47A1;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="420" y="210" width="160" height="40" as="geometry" />
        </mxCell>

        <mxCell id="free3-desc" value="Prevents workflow from&#xa;hanging on large packages" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#90caf9;strokeColor=#0D47A1;fontSize=10" vertex="1" parent="1">
          <mxGeometry x="600" y="210" width="160" height="40" as="geometry" />
        </mxCell>

        <mxCell id="free4" value="4. Continue-on-error for AI" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8bbd0;strokeColor=#C2185B;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="420" y="270" width="160" height="40" as="geometry" />
        </mxCell>

        <mxCell id="free4-desc" value="Avoids re-running entire&#xa;workflow on AI failures" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f48fb1;strokeColor=#C2185B;fontSize=10" vertex="1" parent="1">
          <mxGeometry x="600" y="270" width="160" height="40" as="geometry" />
        </mxCell>

        <mxCell id="free5" value="5. Cache ORT results" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#bbdefb;strokeColor=#1976D2;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="420" y="330" width="160" height="40" as="geometry" />
        </mxCell>

        <mxCell id="free5-desc" value="Re-use analyzer results&#xa;across multiple reports" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e3f2fd;strokeColor=#1976D2;fontSize=10" vertex="1" parent="1">
          <mxGeometry x="600" y="330" width="160" height="40" as="geometry" />
        </mxCell>

        <mxCell id="free6" value="6. Model selection" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8bbd0;strokeColor=#C2185B;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="420" y="390" width="160" height="40" as="geometry" />
        </mxCell>

        <mxCell id="free6-desc" value="Use gpt-4.1-mini for simple&#xa;tasks, gpt-4 for complex only" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f48fb1;strokeColor=#C2185B;fontSize=10" vertex="1" parent="1">
          <mxGeometry x="600" y="390" width="160" height="40" as="geometry" />
        </mxCell>

        <!-- Configurable Limits -->
        <mxCell id="config-title" value="Configurable Limits (Adjustable)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="420" y="460" width="280" height="30" as="geometry" />
        </mxCell>

        <mxCell id="config1" value="Conflict limit: 20 → 10 (save $0.10)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#c8e6c9;strokeColor=#2E7D32;fontSize=11;align=left" vertex="1" parent="1">
          <mxGeometry x="420" y="500" width="340" height="30" as="geometry" />
        </mxCell>

        <mxCell id="config2" value="Missing limit: 15 → 10 (save $0.03)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#c8e6c9;strokeColor=#2E7D32;fontSize=11;align=left" vertex="1" parent="1">
          <mxGeometry x="420" y="540" width="340" height="30" as="geometry" />
        </mxCell>

        <mxCell id="config3" value="ScanCode limit: 20 → 10 (save time only)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#c8e6c9;strokeColor=#2E7D32;fontSize=11;align=left" vertex="1" parent="1">
          <mxGeometry x="420" y="580" width="340" height="30" as="geometry" />
        </mxCell>

        <mxCell id="config4" value="Skip AI reports entirely (save $0.20-$0.28)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#c8e6c9;strokeColor=#2E7D32;fontSize=11;align=left;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="420" y="620" width="340" height="30" as="geometry" />
        </mxCell>

        <!-- Cost Breakdown Chart -->
        <mxCell id="chart-title" value="Cost Breakdown by Feature" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="40" y="650" width="240" height="30" as="geometry" />
        </mxCell>

        <mxCell id="bar-ort" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f48fb1;strokeColor=#C2185B;" vertex="1" parent="1">
          <mxGeometry x="40" y="690" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bar-ort-label" value="Main (25%)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontStyle=1;fontColor=#FFFFFF" vertex="1" parent="1">
          <mxGeometry x="40" y="695" width="120" height="20" as="geometry" />
        </mxCell>

        <mxCell id="bar-conflict" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f48fb1;strokeColor=#C2185B;" vertex="1" parent="1">
          <mxGeometry x="40" y="730" width="240" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bar-conflict-label" value="Conflicts (45-55%)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontStyle=1;fontColor=#FFFFFF" vertex="1" parent="1">
          <mxGeometry x="80" y="735" width="120" height="20" as="geometry" />
        </mxCell>

        <mxCell id="bar-missing" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f48fb1;strokeColor=#C2185B;" vertex="1" parent="1">
          <mxGeometry x="40" y="770" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bar-missing-label" value="Missing (20-30%)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontStyle=1;fontColor=#FFFFFF" vertex="1" parent="1">
          <mxGeometry x="50" y="775" width="120" height="20" as="geometry" />
        </mxCell>

        <!-- ROI Analysis -->
        <mxCell id="roi-title" value="Return on Investment (ROI)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="360" y="690" width="240" height="30" as="geometry" />
        </mxCell>

        <mxCell id="roi1" value="Manual license review: ~2-4 hours" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffecb3;strokeColor=#FF6F00;fontSize=11;align=left" vertex="1" parent="1">
          <mxGeometry x="360" y="730" width="400" height="30" as="geometry" />
        </mxCell>

        <mxCell id="roi2" value="Developer time cost: ~$60-$120" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffecb3;strokeColor=#FF6F00;fontSize=11;align=left" vertex="1" parent="1">
          <mxGeometry x="360" y="770" width="400" height="30" as="geometry" />
        </mxCell>

        <mxCell id="roi3" value="AI automation cost: $0.20-$0.33" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#c8e6c9;strokeColor=#2E7D32;fontSize=11;align=left;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="360" y="810" width="400" height="30" as="geometry" />
        </mxCell>

        <mxCell id="roi4" value="Savings per run: ~99.5% cost reduction" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#a5d6a7;strokeColor=#388E3C;fontSize=12;align=center;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="360" y="850" width="400" height="40" as="geometry" />
        </mxCell>

        <!-- Best Practices -->
        <mxCell id="best-title" value="Cost Optimization Best Practices" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="40" y="830" width="280" height="30" as="geometry" />
        </mxCell>

        <mxCell id="best1" value="✅ Use PyPI fetch to reduce ScanCode scope" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b2dfdb;strokeColor=#00695C;fontSize=10;align=left" vertex="1" parent="1">
          <mxGeometry x="40" y="870" width="280" height="30" as="geometry" />
        </mxCell>

        <mxCell id="best2" value="✅ Set limits on AI analysis (20 conflicts, 15 missing)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b2dfdb;strokeColor=#00695C;fontSize=10;align=left" vertex="1" parent="1">
          <mxGeometry x="40" y="910" width="280" height="30" as="geometry" />
        </mxCell>

        <mxCell id="best3" value="✅ Use cheaper models for simple tasks (gpt-4.1-mini)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b2dfdb;strokeColor=#00695C;fontSize=10;align=left" vertex="1" parent="1">
          <mxGeometry x="40" y="950" width="280" height="30" as="geometry" />
        </mxCell>

        <mxCell id="best4" value="✅ Cache and re-use ORT results across reports" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b2dfdb;strokeColor=#00695C;fontSize=10;align=left" vertex="1" parent="1">
          <mxGeometry x="40" y="990" width="280" height="30" as="geometry" />
        </mxCell>

        <!-- Title -->
        <mxCell id="title" value="AI Cost Optimization and Control Strategy" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="250" y="1050" width="600" height="30" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
